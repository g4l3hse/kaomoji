const kaomojiFrames = [
    {
        frames: [
            "              (∩` ﾛ ´)⊃",
            "            (∩` 口 ´)⊃",
            "        (∩` ﾛ ´)⊃━",
            "    (∩` 口 ´)⊃━炎",
            "(∩` ﾛ ´)⊃━炎炎",
            "(∩＂` 口 ´)⊃━炎炎炎",
            "(∩＂` ﾛ ´)⊃━炎炎炎炎",
            "(∩＂` 口 ´)⊃━炎炎炎炎火",
            "(∩＂` ﾛ ´)⊃━炎炎炎火炎",
            "(∩＂` 口 ´)⊃━炎火炎火炎",
            "(∩＂` ﾛ ´)⊃━炎火炎火炎",
            "(∩＂` 口 ´)⊃━火炎火炎炎",
            "(∩＂` ﾛ ´)⊃━炎火炎炎   ",
            "(∩` 口 ´)⊃━火炎炎      ",
            "(∩` ﾛ ´)⊃━炎炎         ",
            "(∩` - ´)⊃━炎          ",
            "(╮'' - '')╮  炎         ",
            "(╮'' - '')╮     炎      ",
            "(╮'' - '')╮        炎   ",
            "'' - '')╮        炎     ",
            "- '')╮           炎     ",
            "')╮           炎        ",
            "           炎           ",
            "         炎             ",
            "       炎              F",
            "     炎              F I",
            "   炎              F I R",
            " 炎              F I R E",
            "炎              F I R E ",
            "炎            F I R E   ",
            "炎          F I R E     ",
            "炎        F I R E       ",
            "炎      F I R E         ",
            "炎      F I R E         ",
            "炎      F I R E         ",
            "炎      F I R E         ",
            "炎      F I R E         "
        ],
        frameRate: 4
    },
    {
        frames: [
            "              (´･ᴗ･ ` )",
            "            (´･ᴗ･ ` )",
            "        (´･ᴗ･ ` )",
            "    (´･ᴗ･ ` )",
            "!＼(º □ º l|l)/",
            " !!＼(º □ º l|l)/",
            "  !!!＼(º □ º l|l)/",
            "一     ＼(º □ º l|l)/",
            "═一      ＼(º □ º l|l)/",
            "デ═一      ＼(º □ º l|l)/",
            "︻デ═一      ＼(º □ º l|l)/",
            "(҂` ﾛ ´)︻デ═一 ＼(º □ º l|l)/",
            "(҂` 口 ´)︻デ═一 ＼(º 口 º l|l)/",
            "(҂` ﾛ ´)︻デ═一 ＼(º □ º l|l)/",
            "(҂` 口 ´)︻デ═一 ＼(º 口 º l|l)/",
            "(҂` ﾛ ´)︻デ═一 ＼(º □ º l|l)/",
            "(҂` ﾛ ´)︻デ═一 ▬  ＼(º □ º l|l",
            "(҂` - ´)︻デ═一   ▬   ＼(º □ º l",
            "(҂` - ´)︻デ═一     ▬  ＼(º □",
            "(∩` - ´)⊃━デ═一       ▬ ＼(",
            "(∩` - ´)⊃━デ═一         ",
            "(╮` - ´)╮━デ═一         ",
            "(╮' - ')╮︻デ═一        ",
            " - ')╮︻デ═一           ",
            "- ')╮︻デ═一            ",
            "')╮   ︻デ═一           ",
            "    ︻デ═一             S",
            "  ︻デ═一             S H",
            "デ                 S H O",
            "デ               S H O T",
            "デ             S H O T G",
            "デ           S H O T G U",
            "デ        S H O T G U N ",
            "デ      S H O T G U N   ",
            "デ      S H O T G U N   ",
            "デ      S H O T G U N   ",
            "デ      S H O T G U N   ",
            "デ      S H O T G U N   "
        ],
        frameRate: 4
    },
    {        frames: [
        "                   ⊂(",
  "               ⊂(･ω",
  "           ⊂(･ω･*",
  "      ⊂(･ω･*⊂)",
  "    ⊂(･ω･*⊂)   ",
  "    ⊂(･ω･*⊂)   ",
  "     (つ≧▽≦)つ  ",
   "   (つ≧▽≦)つ  ",
  "    ⊂(･ω･*⊂)   ",
  "    ⊂(･ω･*⊂)   ",
  "?   ⊂(･ω･*⊂)   ",
  " ?  ⊂(･ω･*⊂)   ",
  "  ? ⊂(･ω･*⊂)   ",
  "   ?⊂(･ω･*⊂)   ",
  "   ?⊂(･ω･*⊂)   ",
  "    w(°ｏ°)w    ",
  "    W(° o °)W    ",
  "    w(°ｏ°)w    ",
  "    W(° o °)W    ",
  "    w(°ｏ°)w    ",
  "   W (°ｏ°) W   ",
  "   W ( ｏ ) W   ",
  "  W  (  O  ) W   ",
  "  W    O    W   ",
  "   W   O   W   ",
  "    W  O  W   ",
  "     W O W   ",
  "     W O W   ",
  "     W O W   ",
  "     W O W   "
    ],
    frameRate: 4
    },
    {
        frames: [
            "   ｡ﾟ(TヮT)ﾟ｡   ",
  "   °。(TヮT)。°   ",
  "   ｡ﾟ(TヮT)ﾟ｡   ",
  "   °。(TヮT)。°   ",
  "   (｡ﾟ(TヮT)ﾟ｡)   ",
  "   ((°。(TヮT)。°))   ",
  "   (( ｡ﾟ(TヮT)ﾟ｡ ))   ",
  "  ((  °。(TヮT)。°  ))  ",
  "((    ｡ﾟ(TヮT)ﾟ｡    ))",
  "(     °。(TヮT)。°      )",
  "      ｡ﾟ(TヮT)ﾟ｡        ",
  "    °。(TヮT)。°       W",
  "  ｡ﾟ(TヮT)ﾟ｡         WA",
  "°。(TヮT)。°        WA  ",
  "(TヮT)            WA    ",
  "TヮT)           WA      ",
  "ヮT)          WA        ",
  "ヮ)         WA          ",
  "ヮ         WA           ",
  "ヮ         WA           ",
  "ヮ         WA           ",
  "ヮ         WA           ",
  "ヮ         WA           ",
  "ヮ         WA           ",
  "ヮ         WA           ",
  "ヮ         WA           "
        ],
        frameRate: 4
    },
    {
        frames: [
            "                    ꒰•",
            "                  ꒰ •◡",
            "               ꒰•◡•〟꒱",
            "             ꒰ •◡•〟 ꒱",
            "             ꒰•◡•〟꒱  ",
            "           ꒰ •◡•〟 ꒱  ",
            "          ꒰•◡•〟꒱     ",
            "        ꒰ •◡•〟 ꒱      ",
            "      ꒰•◡•〟꒱      ",
            "     d꒰•◡•〟꒱      ",
            "    d꒰ ^◡^〟꒱      ",
            "     d꒰•◡•〟꒱         ｨ",
            "    d꒰ ^◡^〟꒱        ｨｨ",
            "   d꒰ •◡•〟 ꒱       ｨｨﾈ",
            "  d꒰•◡•〟꒱     ｨｨﾈ      ",
            " d꒰ •◡•〟 ꒱  ｨｨﾈ        ",
            "d꒰•◡•〟꒱ｨｨﾈ             ",
            "d꒰•◡•〟꒱ｨｨﾈ             ",
            "•◡•꒱ｨｨﾈ               G ",
            "•꒱ｨｨﾈ               G O ",
            "ｨｨﾈ               G O O ",
            "ｨｨﾈ             G O O D ",
            "ｨｨﾈ           G O O D   ",
            "ｨｨﾈ         G O O D     ",
            "ｨｨﾈ       G O O D       ",
            "ｨｨﾈ       G O O D       ",
            "ｨｨﾈ       G O O D       ",
            "ｨｨﾈ       G O O D       ",
            "ｨｨﾈ       G O O D       ",
            "ｨｨﾈ       G O O D       ",
            "ｨｨﾈ       G O O D       ",
            "ｨｨﾈ       G O O D       ",
        ],
        frameRate: 4
    },
    {
        frames: [
            "⁾                          ",
            "ᕗ⁾⁾                       ",
            "•́)ᕗ⁾⁾                      ",
            " •̀ㅂ•́)ᕗ⁾⁾                  ",
            "ᕕ( •̀ㅂ•́)ᕗ⁾⁾                ",
            "₍₍ ᕕ( •̀ㅂ•́)ᕗ⁾⁾            ",
            "      ₍₍ ᕕ( •̀ㅂ•́)ᕗ⁾⁾      ",
            "         ₍₍ ᕕ( •̀ㅂ•́)ᕗ⁾⁾   ",
            "            ₍₍ ᕕ( •̀ㅂ•́)ᕗ⁾⁾",
            "              ₍₍ ᕕ( •̀ㅂ•́)ᕗ",
            "                ₍₍ ᕕ( •̀ㅂ•́)",
            "                  ₍₍ ᕕ( •̀ㅂ",
            "                      ₍₍ ᕕ(",
            "                        ₍₍ ",
            "                           ",
            "ㅂ                         B",
            " ㅂ                      B Y",
            "  ㅂ                   B Y E",
            "   ㅂ                B Y E  ",
            "    ㅂ              B Y E   ",
            "     ㅂ            B Y E    ",
            "      ㅂ          B Y E     ",
            "       ㅂ        B Y E      ",
            "       ㅂ        B Y E      ",
            "       ㅂ        B Y E      ",
            "       ㅂ        B Y E      ",
            "       ㅂ        B Y E      ",
            "       ㅂ        B Y E      ",
            "       ㅂ        B Y E      ",
            "       ㅂ        B Y E      ",
            "       ㅂ        B Y E      ",
            "       ㅂ        B Y E      ",
        ],
        frameRate: 4
    },    {
        frames: [
            "~                         ",
  "~~                        ",
  "皿~~                      ",
  "_ 皿~~                    ",
  ")_ 皿~~                   ",
  "^)_ 皿~~                  ",
  "^^)_ 皿~~                 ",
  "( ^^)_ 皿~~               ",
  "  ( ^^)_ 皿~~             ",
  "   ( ^=^)_ 皿~~           ",
  "   ( ^^)_ 皿~~           D",
  "   ( ^=^)_ 皿~~         D I",
  "   ( ^^)_ 皿~~       D I S",
  "   ( ^=^)_ 皿~~     D I S H",
  "   ( ^^)_ 皿~~      D I S H",
  "   ( ^=^)_ 皿~~     D I S H",
  "   ( ^^)_ 皿~~      D I S H",
  "   ( ^=^)_ 皿~~     D I S H",
  "   ( ^^)_ 皿~~      D I S H",
  "   ( ^=^)_ 皿~~     D I S H",
  "   ( ^^)_ 皿~~      D I S H"
        ],
        frameRate: 4
    },    {
        frames: [
            "(_ _)           ",
  "(- -)           ",
  "(_ _)           ",
  "(- -)           ",
  "(_ _)           ",
  "(- -)           ",
  "(_ _)           ",
  "(- -)           ",
  "(_ _)           I",
  "(- -)           I AM",
  "(_ _)           I AM SO",
  "(- -)           I AM SOR",
  "(_ _)           I AM SORR",
  "(- -)           I AM SORRY",
  "(_ _)           I AM SORRY",
  "(- -)           I AM SORRY",
  "(_ _)           I AM SORRY",
  "(- -)           I AM SORRY",
  "(_ _)           I AM SORRY",
  "(- -)           I AM SORRY",
  "(_ _)           I AM SORRY",
  "(- -)           I AM SORRY",
  "(_ _)           I AM SORRY"
        ],
        frameRate: 4
    },    {
        frames: [
            "F#?%!!!           ",
  "  F#?%!!!         ",
  "    B$T*@!!!      ",
  "      B$T*@!!!    ",
  "凸      J§#K!!!   ",
  ")凸       J§#K!!! ",
  "ﾛ ´)凸       @*#!!",
  "҂` ■ ´)凸      @*#",
  "(҂` ﾛ ´)凸        ",
  "(҂` ■ ´)凸        ",
  "(҂` ﾛ ´)凸        ",
  "(҂` ■ ´)凸        ",
  "҂` ﾛ ´)凸         ",
  "` ■ ´)凸          R",
  "ﾛ ´)凸          R U",
  "´)凸          R U D",
  "凸          R U D E",
  "凸          R U D E",
  "凸          R U D E",
  "凸          R U D E",
  "凸          R U D E",
  "凸          R U D E",
  "凸          R U D E",
  "凸          R U D E",
  "凸          R U D E",
  "凸          R U D E"
        ],
        frameRate: 4
    },    {
        frames: [
            "(｡•ω•｡)           ",
  "(｡^ω^｡)           ",
  "(｡•ω•｡)           ",
  "(｡^ω^｡)           ",
  "(｡•ω•｡)           ",
  "(｡0ω0｡)?           ",
  "(｡0ω0｡)?           ",
  "(｡0ω0｡)??           ",
  "(｡0ω0｡)??           ",
  "(｡0-0｡)???           ",
  "(｡0-0｡)???           ",
  "(=_=)             ",
  "(=_=)             ",
  "(=_=)             ",
  "(눈_눈)           ",
  "(눈_눈)           ",
  "(눈_눈)           ",
  "눈_눈            E",
  "눈            E Y",
  "눈            E Y E",
  "눈           E Y E ",
  "눈          E Y E  ",
  "눈         E Y E   ",
  "눈         E Y E   ",
  "눈         E Y E   ",
  "눈         E Y E   ",
  "눈         E Y E   ",
  "눈         E Y E   ",
  "눈         E Y E   "
        ],
        frameRate: 4
    }, {
        frames: [
"（笑）",
  "(≧▽≦)",
   "（笑）",
  "(≧▽≦)",
   "（笑）",
  "(≧▽≦)",
   "（笑）",
  "(≧▽≦)",
   "（笑）",
  "(≧▽≦)",
   "（笑）",
  "笑 G",
  "笑  G I",
  "笑   G I G",
  "笑   G I G G",
  "笑    G I G G L",
  "笑     G I G G L E",
   "笑     G I G G L E",
   "笑     G I G G L E",
   "笑     G I G G L E",
   "笑     G I G G L E",
   "笑     G I G G L E",
   "笑     G I G G L E",
   "笑     G I G G L E"
        ],
        frameRate: 4
    }, {
        frames: [
"（泣）",
  "*(>д<)*",
  "･ﾟﾟ*(>д<)*ﾟﾟ･",
  "｡･ﾟﾟ*(>д<)*ﾟﾟ･｡",
  "（泣）",
  "*(>д<)*",
  "･ﾟﾟ*(>д<)*ﾟﾟ･",
  "｡･ﾟﾟ*(>д<)*ﾟﾟ･｡",
  "（泣）",
  "*(>д<)*",
  "･ﾟﾟ*(>д<)*ﾟﾟ･",
  "｡･ﾟﾟ*(>д<)*ﾟﾟ･｡",
  "（泣）",
  "*(>д<)*",
  "･ﾟﾟ*(>д<)*ﾟﾟ･",
  "｡･ﾟﾟ*(>д<)*ﾟﾟ･｡",
  "（泣）",
  "*(>д<)*",
  "･ﾟﾟ*(>д<)*ﾟﾟ･",
  "｡･ﾟﾟ*(>д<)*ﾟﾟ･｡",
  "（泣）",
  "泣",
  "泣 W",
  "泣  W H",
  "泣   W H I",
  "泣    W H I M",
  "泣     W H I M P",
  "泣      W H I M P E",
  "泣       W H I M P E R",
   "泣       W H I M P E R",
   "泣       W H I M P E R",
   "泣       W H I M P E R",
   "泣       W H I M P E R",
   "泣       W H I M P E R",
   "泣       W H I M P E R"
        ],
        frameRate: 4
    },
];

function createKaomojiSketch(box, frames, frameRate = 3) {
    let currentFrame = 0;

    return (p) => {
      let c;

      p.setup = () => {
        c = p.createCanvas(box.clientWidth, box.clientHeight);
        let dpr = window.devicePixelRatio || 1;
        p.createCanvas(box.clientWidth * dpr, box.clientHeight * dpr);
        p.pixelDensity(dpr);
        c.canvas.style.width = box.clientWidth + "px";
        c.canvas.style.height = box.clientHeight + "px";

        c.parent(box);
        p.textAlign(p.CENTER, p.CENTER);
        p.textSize(Math.min(p.width, p.height) * 0.2);
        p.frameRate(frameRate);
        p.noLoop();

        c.canvas.style.opacity = '0';
        c.canvas.style.transition = 'opacity 0.3s ease';
      };

      p.draw = () => {
        p.background(255);
        p.fill(0);
        let frameText = frames[currentFrame];
        if (typeof frameText !== "string") {
          frameText = String(frameText);
        }
        p.text(frameText, p.width / 2, p.height / 2);
        currentFrame = (currentFrame + 1) % frames.length;
      };

      box.addEventListener('mouseenter', () => {
        c.canvas.style.opacity = '1';
        p.loop();
      });

      box.addEventListener('mouseleave', () => {
        c.canvas.style.opacity = '0';
        p.noLoop();
      });
    };
  }

  document.querySelectorAll('.animation-box').forEach((box) => {
    const id = parseInt(box.dataset.animationId);
    const { frames, frameRate } = kaomojiFrames[id];

    const sketch = createKaomojiSketch(box, frames, frameRate);
    new p5(sketch);
  });
